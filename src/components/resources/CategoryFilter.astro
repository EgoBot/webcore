---
interface Props {
  categories: string[];
  categoryCounts?: Record<string, number>;
  totalCount?: number;
}

const { categories, categoryCounts = {}, totalCount = 0 } = Astro.props;
---

<div class="category-filter">
  <div class="filter-chip">
    <input
      id="all-resources"
      type="radio"
      name="resource-category"
      data-category="all"
      checked
    />
    <label for="all-resources">
      All Resources ({totalCount})
    </label>
  </div>

  {categories.map(category => (
    <div class="filter-chip">
      <input
        id={`category-${category.toLowerCase().replace(/\s+/g, '-')}`}
        type="radio"
        name="resource-category"
        data-category={category}
      />
      <label for={`category-${category.toLowerCase().replace(/\s+/g, '-')}`}>
        {category} ({categoryCounts[category] || 0})
      </label>
    </div>
  ))}
</div>

<style>
  .category-filter {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-bottom: 2rem;
  }

  .filter-chip {
    position: relative;
  }

  .filter-chip input {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
  }

  .filter-chip label {
    display: block;
    padding: 0.5rem 1rem;
    border-radius: max(100px, calc(6.94vw * var(--scale, 1)));
    border: 2px solid var(--color-border, #e5e7eb);
    background: var(--color-surface, #f3f4f6);
    color: var(--color-text, #111827);
    text-decoration: none;
    transition: background 0.6s ease-out, border-color 0.6s ease-out, color 0.6s ease-out;
    font-weight: 500;
    text-transform: uppercase;
    font-size: 0.875rem;
    letter-spacing: 0.025em;
    cursor: pointer;
  }

  .filter-chip label:hover {
    border-color: var(--color-primary, #000000);
    background: var(--color-primary, #000000);
    color: white;
    transition: background 0.15s ease-out, border-color 0.15s ease-out, color 0.15s ease-out;
  }

  .filter-chip input:checked + label {
    background: var(--color-primary, #000000);
    color: white;
    border-color: var(--color-primary, #000000);
  }
</style>
